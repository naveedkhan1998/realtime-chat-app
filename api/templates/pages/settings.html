{% extends "layouts/app.html" %}

{% block title %}Settings - Chat App{% endblock %}
{% block mobile_title %}Settings{% endblock %}

{% block main_content %}
<div id="main-content" class="flex-1 bg-background overflow-y-auto">
    <div class="max-w-2xl mx-auto p-8">
        <!-- Header -->
        <h1 class="text-3xl font-bold text-foreground mb-8">Settings</h1>
        
        <!-- Appearance -->
        <section class="mb-10">
            <h2 class="text-xl font-semibold text-foreground mb-5 flex items-center gap-2">
                <i data-lucide="palette" class="w-5 h-5 text-primary"></i>
                Appearance
            </h2>
            
            <div class="glass-card rounded-2xl border border-border/50 overflow-hidden">
                <!-- Theme -->
                <div class="flex items-center justify-between p-5">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center">
                            <i data-lucide="sun-moon" class="w-6 h-6 text-muted-foreground"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-foreground">Theme</p>
                            <p class="text-sm text-muted-foreground">Choose your preferred theme</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-1 p-1 bg-muted/50 rounded-xl" x-data>
                        <button @click="darkMode = false; localStorage.setItem('darkMode', 'false')"
                                :class="!darkMode ? 'bg-background shadow-sm text-foreground' : 'text-muted-foreground hover:text-foreground'"
                                class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200">
                            Light
                        </button>
                        <button @click="darkMode = true; localStorage.setItem('darkMode', 'true')"
                                :class="darkMode ? 'bg-background shadow-sm text-foreground' : 'text-muted-foreground hover:text-foreground'"
                                class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200">
                            Dark
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Notifications -->
        <section class="mb-10">
            <h2 class="text-xl font-semibold text-foreground mb-5 flex items-center gap-2">
                <i data-lucide="bell" class="w-5 h-5 text-primary"></i>
                Notifications
            </h2>
            
            <div class="glass-card rounded-2xl border border-border/50 overflow-hidden divide-y divide-border/30">
                <!-- Sound -->
                <div class="flex items-center justify-between p-5"
                     x-data="{ enabled: localStorage.getItem('notificationSound') !== 'false' }">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center">
                            <i data-lucide="volume-2" class="w-6 h-6 text-muted-foreground"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-foreground">Notification Sound</p>
                            <p class="text-sm text-muted-foreground">Play a sound for new messages</p>
                        </div>
                    </div>
                    
                    <button @click="enabled = !enabled; localStorage.setItem('notificationSound', enabled)"
                            :class="enabled ? 'bg-primary' : 'bg-muted'"
                            class="relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ease-in-out">
                        <span :class="enabled ? 'translate-x-5' : 'translate-x-0'"
                              class="pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"></span>
                    </button>
                </div>
                
                <!-- Desktop Notifications -->
                <div class="flex items-center justify-between p-5"
                     x-data="{ enabled: Notification.permission === 'granted' }">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center">
                            <i data-lucide="bell-ring" class="w-6 h-6 text-muted-foreground"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-foreground">Desktop Notifications</p>
                            <p class="text-sm text-muted-foreground">Get notified even when the app is in background</p>
                        </div>
                    </div>
                    
                    <button @click="if (Notification.permission === 'default') { Notification.requestPermission().then(p => enabled = p === 'granted'); } else { enabled = !enabled; }"
                            :class="enabled ? 'bg-primary' : 'bg-muted'"
                            class="relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ease-in-out">
                        <span :class="enabled ? 'translate-x-5' : 'translate-x-0'"
                              class="pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"></span>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Privacy -->
        <section class="mb-10">
            <h2 class="text-xl font-semibold text-foreground mb-5 flex items-center gap-2">
                <i data-lucide="shield" class="w-5 h-5 text-primary"></i>
                Privacy
            </h2>
            
            <div class="glass-card rounded-2xl border border-border/50 overflow-hidden divide-y divide-border/30">
                <!-- Online Status -->
                <div class="flex items-center justify-between p-5"
                     x-data="{ enabled: localStorage.getItem('showOnlineStatus') !== 'false' }">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center">
                            <i data-lucide="eye" class="w-6 h-6 text-muted-foreground"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-foreground">Show Online Status</p>
                            <p class="text-sm text-muted-foreground">Let others see when you're online</p>
                        </div>
                    </div>
                    
                    <button @click="enabled = !enabled; localStorage.setItem('showOnlineStatus', enabled)"
                            :class="enabled ? 'bg-primary' : 'bg-muted'"
                            class="relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ease-in-out">
                        <span :class="enabled ? 'translate-x-5' : 'translate-x-0'"
                              class="pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"></span>
                    </button>
                </div>
                
                <!-- Read Receipts -->
                <div class="flex items-center justify-between p-5"
                     x-data="{ enabled: localStorage.getItem('showReadReceipts') !== 'false' }">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center">
                            <i data-lucide="check-check" class="w-6 h-6 text-muted-foreground"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-foreground">Read Receipts</p>
                            <p class="text-sm text-muted-foreground">Let others know when you've read their messages</p>
                        </div>
                    </div>
                    
                    <button @click="enabled = !enabled; localStorage.setItem('showReadReceipts', enabled)"
                            :class="enabled ? 'bg-primary' : 'bg-muted'"
                            class="relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full transition-colors duration-200 ease-in-out">
                        <span :class="enabled ? 'translate-x-5' : 'translate-x-0'"
                              class="pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"></span>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Account -->
        <section class="mb-10">
            <h2 class="text-xl font-semibold text-foreground mb-5 flex items-center gap-2">
                <i data-lucide="user" class="w-5 h-5 text-primary"></i>
                Account
            </h2>
            
            <div class="space-y-3">
                <a href="{% url 'htmx:profile' %}" class="flex items-center justify-between p-5 glass-card rounded-2xl border border-border/50 hover:bg-muted/30 transition-all duration-200 group">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-muted/50 rounded-xl flex items-center justify-center group-hover:bg-primary/10 transition-colors">
                            <i data-lucide="user-cog" class="w-6 h-6 text-muted-foreground group-hover:text-primary transition-colors"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-foreground">Edit Profile</p>
                            <p class="text-sm text-muted-foreground">Change your name and avatar</p>
                        </div>
                    </div>
                    <i data-lucide="chevron-right" class="w-5 h-5 text-muted-foreground group-hover:text-foreground transition-colors"></i>
                </a>
                
                <button class="w-full flex items-center justify-between p-5 bg-destructive/5 rounded-2xl border border-destructive/20 hover:bg-destructive/10 transition-all duration-200 text-left"
                        onclick="confirm('Are you sure you want to delete your account? This action cannot be undone.')">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-destructive/10 rounded-xl flex items-center justify-center">
                            <i data-lucide="trash-2" class="w-6 h-6 text-destructive"></i>
                        </div>
                        <div>
                            <p class="font-semibold text-destructive">Delete Account</p>
                            <p class="text-sm text-destructive/70">Permanently delete your account and all data</p>
                        </div>
                    </div>
                </button>
            </div>
        </section>
        
        <!-- About -->
        <section>
            <h2 class="text-xl font-semibold text-foreground mb-5 flex items-center gap-2">
                <i data-lucide="info" class="w-5 h-5 text-primary"></i>
                About
            </h2>
            
            <div class="p-5 glass-card rounded-2xl border border-border/50">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-primary via-secondary to-accent rounded-2xl flex items-center justify-center shadow-lg shadow-primary/20">
                        <i data-lucide="message-circle" class="w-7 h-7 text-white"></i>
                    </div>
                    <div>
                        <p class="font-bold text-foreground text-lg">Chat App</p>
                        <p class="text-sm text-muted-foreground">Version 1.0.0</p>
                    </div>
                </div>
                <p class="text-sm text-muted-foreground">
                    Built with Django, HTMX, and Alpine.js<br>
                    &copy; 2024 Chat App. All rights reserved.
                </p>
            </div>
        </section>
    </div>
</div>
{% endblock %}
